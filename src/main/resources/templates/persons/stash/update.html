<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Persons</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<link rel="stylesheet" type="text/css" href="../static/css/main.css">
<script src="../static/js/jquery/jquery-3.5.1.js"></script>

<script>
	var isUpdateOtherNameHidden = false;
	function showHideUdateOtherName(){
		showHideUdateOtherNameTimed(500);
	}
	
	function showHideUdateOtherNameTimed(time){
		if (isUpdateOtherNameHidden){
			$("#updateOtherName").show(time);
			isUpdateOtherNameHidden = false;
		}else{
			$("#updateOtherName").hide(time);
			isUpdateOtherNameHidden = true;
		}
	}

	$(document).ready(
			function(){
				$("[id^=editOtherName_]").click(showHideUdateOtherName);
				showHideUdateOtherNameTimed(0);
			});
</script>



<body>
	<div id="updateOtherName" class="centeredPanel" style="width:400px">
		<table>
			<tr>
				<th colspan="2">Edit Other Names</th>
			</tr>
			<tr>
				<th>Other Name</th>
				<td><input type="text" name="updateOtherName" id="updateOtherName"></td>
			</tr>
			<tr>
				<th>Other Name Type</th>
				<td>????</td>
			</tr>
		</table>
	</div>
	<form action="person" method="post">
		<input type="hidden" name="updateType" id="updateType" th:attr="value=${updateType}" />
		<input type="hidden" th:attr="name='personId', id='personId', value=${person.getPersonId()}">	
	
	
		<table style="width: 60%;">
			<tr>
				<th>Person ID</th>
				<td th:attr="text=${person.getPersonId()}"></td>
			</tr>
			<tr>
				<th>Firstname</th>
				<td>
					<input type="text" name="firstname" id="firstname"  th:attr="value=${person.getFirstname()}">
				</td>
			</tr>
			<tr>
				<th>Lastname</th>
				<td>
					<input type="text" name="lastname" id="lastname"  th:attr="value=${person.getLastname()}">
				</td>
			</tr>
			<tr>
				<th>Date of Birth</th>
				<td>
					<input type="text" name="dateOfBirth" id="dateOfBirth"  th:attr="value=${person.getDateOfBirth()}">
				</td>
			</tr>
			<tr>
				<th>Other Names</th>
				<td>
					<table th:if="${person.getOtherNames()}" id="otherNamesTable" class="subtable">
						<tr th:each="otherName: ${person.getOtherNames()}">
							<td th:text="${otherName.getValue()}" >other_name</td>
							<td th:text="${otherName.getNameType().getValue()}" >other_name_type</td>
							<td>
								<button type="button" class="ellipsesButton"
										th:attr="name='editOtherName_'+${otherName.getOtherNameId()}, 
										         id='editOtherName_'+${otherName.getOtherNameId()}">
										...
								</button>
							</td>
						</tr>
					</table>
				</td>
			</tr>
			<tr>
				<td colspan="2" style="border-style: none">
					<button type="submit" name="requestAction" id="requestAction" value="SAVE">
						<span th:switch="${updateType}"> 
							<span th:case="'DELETE'" th:text="'Confirm'"></span> 
							<span th:case="*" th:text="'Save'"></span>
						</span>
					</button>
					<button type="submit" name="requestAction" id="requestCancel" value="CANCEL" th:text="'Cancel'"> </button>
				</td>
			</tr>
		</table>
	</form>
</body>
</html>