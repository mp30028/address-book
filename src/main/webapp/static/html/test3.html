
<!DOCTYPE HTML>
<html>
<head>
    <title>Test Adding Rows to a table</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<link rel="stylesheet" type="text/css" href="../css/main.css">
<script type="text/javascript" src="../js/jquery/jquery-3.5.1.js"></script>

<script type="text/javascript">
	function doAddNewRow(clickedButton){
		console.log('id of clicked button = ' + clickedButton.id);
// 		var rowToClone = $(clickedButton).closest('tr').prev();
		var rowToClone = $('#row_Template');
		var newRow = $(rowToClone).clone();
		$(newRow).css("display","");
		$(newRow).insertBefore($(rowToClone));
		console.log('id of cloned row = ' + $(newRow).attr('id'));
		$(newRow).attr('id', 'rowDelta');
		console.log('id of cloned row after update = ' + $(newRow).attr('id'));
		console.log('id of row that was cloned = ' + $(rowToClone).attr('id'));
		
		const suffix = '_Template';
// 		var numberOfIds = $(newRow, $('[id$="' + suffix + '"]')).length;
// 		var numberOfNames = $(newRow, $('[name$="' + suffix + '"]')).length;


		var numberOfIds_1 = $(newRow).find('[id$="' + suffix + '"]').length;
		var numberOfNames_1 = $(newRow).find('[name$="' + suffix + '"]').length;
		console.log('numberOfIds_1 = ', numberOfIds_1, '. numberOfNames_1 = ',numberOfNames_1);

		
		var numberOfIds_2 = $(newRow).children('[id$="' + suffix + '"]').length;
		var numberOfNames_2 = $(newRow).children('[name$="' + suffix + '"]').length;
		console.log('numberOfIds_2 = ', numberOfIds_2, '. numberOfNames_2 = ',numberOfNames_2);
		
		var numberOfIds_2 = $(newRow).children('[id$="' + suffix + '"]').attr('id', newId);
// 		var numberOfNames_2 = $(newRow).children('[name$="' + suffix + '"]').length;		
	}
	
	function newId(m,currentId){
// 		var currentId = $(element).attr('id');
		return currentId + '~~';
	}
</script>

<body>
		<table>
			<tr id="rowAlpha">
				<td id="cellAlpha_1">Row: Alpha, Column: One</td>
				<td id="cellAlpha_2">Row: Alpha, Column: Two</td>
				<td id="cellAlpha_3">Row: Alpha, Column: Three</td>
			</tr>
			<tr id="rowBeta">
				<td id="cellBeta_1">Row: Beta, Column: One</td>
				<td id="cellBeta_2">Row: Beta, Column: Two</td>
				<td id="cellBeta_3">Row: Beta, Column: Three</td>
			</tr>
			<tr id="rowGamma">
				<td id="cellGamma_1">Row: Gamma, Column: One</td>
				<td id="cellGamma_2">Row: Gamma, Column: Two</td>
				<td id="cellGamma_3">Row: Gamma, Column: Three</td>
			</tr>
			<tr id="row_Template" style="display: none;">
				<td id="cell1_Template">Row: Template, Column: One</td>
				<td id="cell2_Template">Row: Template, Column: Two</td>
				<td id="cell3_Template">Row: Template, Column: Three</td>
			</tr>			
			<tr>
				<td colspan="3">
					<button id="newRowButton" onclick="doAddNewRow(this)">Add New Row</button>
				</td>
			</tr>			
		</table>
</body>
</html>